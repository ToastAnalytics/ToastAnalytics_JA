#はじめに

Analyticsでキャンペーンとはインハウス・キャンペーン（inhouse campaign)のことを言います。これは、アプリ内のポップアップやバナーを通じてユーザーにイベント（ミッション)を表示し、利用者がイベントを実施した場合、リワードを付与できる機能を提供しています。
Toast Analyticsが提供するインハウス・キャンペーンの機能は、キャンペーンの実施によるユーザーおよび売上の増加に伴う成果分析の結果指標を自動的に確認できます。また、キャンペーンの効率を最大化するために、キャンペーンの目的に合ったターゲットを絞ることができます。

この機能を使うためには、以下のような追加作業が必要です。本ドキュメントは、それらの作業の詳細について説明しています。
1.キャンペーンの表示およびリワードの処理のために、アプリクライアントにToast Analytics SDKの適用が必要です。
2.ユーザーのミッションの達成通知およびリワードの確認のために、ゲームサーバー（またはアプリケーションサーバーとキャンペーンサーバー間の通信が必要です。)

##用語説明
キャンペーンサービスでは、内部的に以下の用語が使われます。

|用語|説明|
|---|---|
|（インハウス)キャンペーン|　アプリの中でポップアップやバナーを通じてユーザーにイベント（ミッション)を表示し、ユーザーがミッションを達成した場合、リワードを付与できるToast Analyticsの機能|
|（キャンペーン)ミッション|　キャンペーンのリワード提供のためにユーザーが達成すべき目標|
|カスタマイズデータ|	カスタマイズデータ|
|（キャンペーン)リワード|　ユーザーがミッションを達成した場合、提供するアプリ内のゲーム内通貨|

##重要な連動項目における説明
Campaignサービスの動作フローは次の図のとおりです。
![Project Sett](https://raw.githubusercontent.com/ToastAnalytics/ToastAnalytics_JA/master/docs/Developer/images/image003.png)
[図1 サービスの動作フロー]

以下に取り上げられる内容は、連動時に必要な重要項目について簡単に説明したものです。このドキュメントの後半で、その詳細を確認できます。
###1.TOAST Analytics SDKの適用
Analytics Campaignの機能を使うためには、Toast Analytics SDKをアプリに適用する必要があります。
TOAST Analytics SDKの適用に関する内容は、このドキュメントの後半で確認できます。また、別途提供されるToast Analytics APIのリファレンスドキュメントにもその内容が取り上げられています。

###2.キャンペーンの設定
新規キャンペーンを直接作成することもできますが、テンプレートを使うことでより早く簡単に効率の良いキャンペーンを作ることができます。 
Toast Analyticsのウェブサイトにある「キャンペーンの実施」で新しいキャンペーンを登録することができます。これに関する詳細は、該当するページの右上にある「ページガイド」に取り上げられています。

###3.テスト端末の登録
キャンペーンが一般ユーザーに表示される前に、キャンペーンの正常な表示および動作の可否を確認するためにテストを行う必要があります。テストを実施するためには、Toast Analytics SDKでDevice IDおよびDevice Tokenを獲得してからテスト端末を登録します。
Analyticsのウェブサイトの「アプリの設定ボタン」 > 「キャンペーンの設定」 > 「テストデバイスの設定」でテスト端末を登録することができます。

###4.キャンペーンのテストの実施
テスト端末の登録が正常に終わると、Toast Analyticsのウェブサイトの「キャンペーン実施」> 「キャンペーンリスト」 > 「テストボタン」をクリックすることでテストが進みます。

###5.キャンペーンの動作確認
テスト端末でキャンペーンが正常に動作するか確認します。そのためには、次に取り上げられる4ステージにおける進捗状況を確認する必要があります。各ステージの詳細はToast Analyticsのウェブサイトの右上にある「ページガイド」で確認できます。
但し、ミッションの達成およびリワードの検証は、それらの項目における設定が完了しているキャンペーンのみ該当します。
- 表示：キャンペーン情報がテスト端末に正常に受信され、キャンペーンを表示する準備が完了した状態
- 実施：テスト端末にバナーまたはポップアップが表示され、キャンペーンへの参加を開始した状態
- ミッション：ゲームサーバーからキャッシュサーバーにミッションデータの送信が正常に終了した状態
- リワード：キャンペーンサーバーからゲームサーバーへの情報転送が正常に終了した状態

###6.キャンペーンの表示
キャンペーンテストが全て完了すると、外部のユーザーがアクセスできるようにキャンペーンを開始することができます。キャンペーンの開始後、アプリがキャンペーンの表示場所（キャンペーン設定>表示場所の設定を参照)に達した場合、キャンペーンが表示されます。

###7.ミッションの完了およびリワードの付与処理
キャンペーンのミッションを達成するために、ユーザーがある特定の行動（例：レベル、ランキングの変化など)をした場合、ゲームサーバーは、キャンペーンサーバーのAPI（check mission)を呼び出し、ミッションの達成有無を確認できます。 
ミッション達成後は、キャンペーンサーバーからゲームサーバーにリワード情報が送られます。ゲームサーバーは、この情報に基づいてクライアントにリワードを付与します。

#キャンペーンの環境設定

##環境設定：キャンペーン実施の前に設定を行う

キャンペーンを実施するためには、「アプリ設定」 > 「キャンペーン設定」および「プッシュ設定」に必要な情報を登録しなければなりません。 
「表示場所の設定」は、ゲーム内におけるキャンペーン画像の表示場所を登録するメニューで、値の入力は必須です。「ミッションおよびリワードアイテムの設定」は、リワードがあるキャンペーンのみ登録してください。 
「レンダリング設定」の場合、ユーザー定義の「閉じる」ボタンの使用を希望する場合のみ設定してください。システムから提供される画像を使う場合、設定しなくても構いません。 
「テストデバイスの設定」項目では、キャンペーン実施テストのために、テストデバイスを1台以上必ず登録しなければなりません。 
「プッシュ設定」は、プッシュを活用するキャンペーンを実施する場合、入力必須です。
![Project Sett](https://raw.githubusercontent.com/ToastAnalytics/ToastAnalytics_JA/master/docs/Developer/images/image4.png)
[図4 キャンペーン設定のメニューの位置]
###1.キャンペーン設定 > 表示場所の設定およびテスト
アプリでキャンペーンまたはバナーが表示される場所に対するユニークな識別文字であるKEYを設定します。ポップアップとバナーを登録してからOSごとにテストを実施し、画像が正常に表示されるか確認する必要があります。
![Project Sett](https://raw.githubusercontent.com/ToastAnalytics/ToastAnalytics_JA/master/docs/Developer/images/image007.jpg)
[図5 キャンペーン表示場所の設定]

「表示場所」は重複してはいけません。キャンペーンは、一ヶ所当たり一つのキャンペーンのみ可能です。
一つのキーでアンドロイドとiOSを使うことができます。キャンペーンのポップアップ/バナーの表示を希望するアプリの特定場所では、SDKのキャンペーン表示APIに該当するキーのパラメータを呼び出す必要があります。
表示場所の状態を表す項目には、「テスト」、「結果確認」、「連動完了」の三つがあります。
 「結果確認」、「連動完了」におけるキーの修正・削除はできません。

![Project Sett](https://raw.githubusercontent.com/ToastAnalytics/ToastAnalytics_JA/master/docs/Developer/images/image008.jpg)   
[図6 キャンペーン表示場所の修正のためのポップアップ]

「表示場所のテスト」は、表示場所が正常にソースに含まれているか確認する機能です。
それぞれの状態値の定義は次のとおりです。
- [テスト] ボタン
現在、テストを実施できる状態
- 「結果確認」ボタン
該当する表示場所においてテストプロモーションが実施されている状態

実際のソースが含まれたアプリにより、該当する場所にプロモーションが難なく表示されているか確認することができます。新たに登録したプロモーションをテストするためには、アプリを再起動する必要があります。プロモーションの正常表示有無に対する確認が完了し、そのボタンをクリックするとステータスが「連動完了」に変わります。そうでない場合は、また「テスト」に初期化されます。

- 連動完了
該当する表示場所が正常にソースに含まれていることを確認した状態

###2.キャンペーン設定> ミッションおよびリワードアイテムの設定
「キャンペーンの実施」 > 「キャンペーンの作成」 > 「基本設定」でミッションおよびリワード付与の有無が「有り」にチェックされている場合、値の入力は必須です。ミッションおよびリワードアイテムは、全OS共通です。

![Project Sett](https://raw.githubusercontent.com/ToastAnalytics/ToastAnalytics_JA/master/docs/Developer/images/image009.jpg)
[図7 キャンペーン表示場所の修正のためのポップアップ]

キャンペーンを登録し、テストを一回以上実施するとそれ以降の修正および削除はできません。慎重を期して入力してください。

![Project Sett](https://raw.githubusercontent.com/ToastAnalytics/ToastAnalytics_JA/master/docs/Developer/images/image010.jpg)   
[図8 ミッション修正時に表示されるポップアップ]

###3.キャンペーン設定 > レンダリング設定
キャンペーンポップアップに表示する「閉じる」ボタンを登録します。

![Project Sett](https://raw.githubusercontent.com/ToastAnalytics/ToastAnalytics_JA/master/docs/Developer/images/image011.jpg)
[図9 レンダリング設定ページ]

登録済みの「閉じる」ボタンは、「キャンペーンの実施」 > 「キャンペーンの作成」 > 「基本設定」で「アプリ内表示方式」をポップアップに選択します。
それから、「詳細設定」にある「閉じる」ボタンのオプション項目で「ユーザー指定」を選ぶと、登録した「閉じる」ボタンをキャンペーンで使うことができます。

![Project Sett](https://raw.githubusercontent.com/ToastAnalytics/ToastAnalytics_JA/master/docs/Developer/images/image012.jpg)
[図10 登録済みの「閉じる」ボタンを使う]

###4.キャンペーン設定 > テストデバイスの設定
表示場所、ミッションおよびリワードアイテム、プッシュ、キャンペーンなどをテストするためにデバイスを登録します。

![Project Sett](https://raw.githubusercontent.com/ToastAnalytics/ToastAnalytics_JA/master/docs/Developer/images/image11.JPG)
[図11 テストデバイスの設定ページ]

使用するデバイスIDおよびGCMまたはAPNSより発行してもらったトークン情報をデバイス登録のポップアップが表示された際、OSごとに入力します。
Toast Analytics SDKのinitializeSdk APIの呼び出しの際、useLoggingUserIdの値をtrueに設定した場合、「デバイスID」入力欄にユーザーIDを入力しなければなりません。
```
int result = initializeSdk(context,  appId, companyId, appVersion, true);
```

Toast Analytics SDKがインストールされたアプリからDevice IDとDevice Tokenを受け取り、入力を行います。
本マニュアルの「ゲームクライアントの適用」 >「ゲームクライアント」 > 「Device IDとPush Tokenの確認」をご参照ください。

![Project Sett](https://raw.githubusercontent.com/ToastAnalytics/ToastAnalytics_JA/master/docs/Developer/images/image12.JPG)   
[図12 テストデバイスの登録および修正時に表示されるポップアップ]

###5.プッシュ設定
プッシュ送信機能を使うためには、APNS証明書（iOS)もしくはGCM API Key（アンドロイド)を発行してもらい、プッシュ設定ページに登録する必要があります。証明書、API Keyをプラットフォームごとに確認します。登録方法については次の内容をご参照ください。

######iOSにおけるプッシュ設定

iOSのプッシュ通知は、APNS（Apple Push Notification Service)を活用します。したがって、プッシュ送信機能を使うためには、Apple開発者センターにアプリ登録およびプッシュ通知の有効化が完了していなければなりません。
アプリ登録およびプッシュ通知の有効化が完了している場合は、アプリ選択時に以下のような情報を確認できます。

![Project Sett](https://raw.githubusercontent.com/ToastAnalytics/ToastAnalytics_JA/master/docs/Developer/images/image015.png)   
[図13 APNSにおけるアプリ登録およびプッシュ通知の有効化の確認（iOS)]

アプリ登録およびプッシュ通知が有効化済みの場合は、Analyticsにプッシュ証明書を登録しなければなりません。Analyticsで使われているiOSプッシュの証明書は.p12証明書で、発行プロセスは以下のとおりです。
####Step 1.開発者センターで「Certificates、Identifiers & Profiles」メニューを選択してから、「Certificates」に登録されたアプリを確認します。
登録が正常完了していれば、アプリの名前とAPNs Development iOS、APNs Production iOSの証明書を確認することができます。APNs Production iOSの証明書を選択すると、証明書をダウンロードできます。Analytics Serviceでプッシュ機能を使うためには、Development証明書ではなく、Production証明書が必ず必要です。   

![Project Sett](https://raw.githubusercontent.com/ToastAnalytics/ToastAnalytics_JA/master/docs/Developer/images/image016.png)   
[図14 証明書のダウンロード（iOS)]

####Step 2.ダウンロードした証明書をダブルクリックすると、キーチェーンアプローチアプリに登録されます。キーチェーンアプローチアプリを立ち上げてから、ログインメニューで証明書カテゴリーを選択するとインストールした証明書を確認できます。 
リストの中で証明書を選ぶと、プルダウンリストにパーソナルキーが一緒に表示されます。証明書とパーソナルキーを一緒に選んでから、マウスの右ボタンを押すとポップアップメニューが表示されます。そこで、「2つの項目を送る」メニューを選択します。   

![Project Sett](https://raw.githubusercontent.com/ToastAnalytics/ToastAnalytics_JA/master/docs/Developer/images/image017.png)   
[図15 証明書を送る（iOS)]

####Step 3..p12ファイルを作成する場所を指定してから、エクスポート時に使うパスワードを設定します。 
このパスワードは、Analyticsで証明書を登録する際に必要なので、控えておいてください。   

![Project Sett](https://raw.githubusercontent.com/ToastAnalytics/ToastAnalytics_JA/master/docs/Developer/images/image018.png)   
[図16 証明書のパスワード設定（iOS)]

####Step 4.Analyticsサービスの「APP SETTING」 > 「プッシュ設定」メニューで作成した証明書を登録します。
上記の段階で作成した.p12証明書および証明書作成時に設定したパスワードを一緒に入力します。   

![Project Sett](https://raw.githubusercontent.com/ToastAnalytics/ToastAnalytics_JA/master/docs/Developer/images/image17.png)   
[図17 Analyticsのプッシュ設定メニューにおける証明書の登録（iOS)]

######Androidにおけるプッシュ設定

Androidのプッシュ通知には、GCM（Google Cloud Messaging)が使われています。したがって、プッシュ送信機能を使うためには、Google開発者コンソールにおけるアプリの登録およびCGM使用の有効化が完了していなければなりません。 
Analytics ServiceでAndroidプッシュ送信機能を使うためには、「Project Number」および「API Key」が必要です。
####Step 1.「Google Developers Console」（https://console.developers.google.com/project)でプロジェクトの作成が既に完了しているのであれば、プロジェクトダッシュボードで「Project Number」を確認できます。   

![Project Sett](https://raw.githubusercontent.com/ToastAnalytics/ToastAnalytics_JA/master/docs/Developer/images/image020.png)   
[図18 Project Numberの確認（アンドロイド)]

####Step 2.プロジェクトメニューで、「APIs & auth」 > 「APIs」を選びます。
Google Cloud Messaging for Androidの項目が有効になっていない場合は、オンにします。

####Step 3.プロジェクトメニューで、「APIs & auth」 > 「Credentials」を選びます。
API KEYを発行してもらうために、「Public API access」で「Create new Key」ボタンを押します。   

![Project Sett](https://raw.githubusercontent.com/ToastAnalytics/ToastAnalytics_JA/master/docs/Developer/images/image021.png)   
[図19 API Keyの発行（アンドロイド)]

####Step 4.Server keyを選んで、許容IPは必ず空欄にしておきます。 これは、Analytics Serviceでプッシュ通知を送信する際、制限がかかるのを防ぐためです。また、許容IPを特定IPに指定するとプッシュ送信ができなくなります。   

![Project Sett](https://raw.githubusercontent.com/ToastAnalytics/ToastAnalytics_JA/master/docs/Developer/images/image022.png)   
[図20 許容IPを空欄のままにする（アンドロイド)]

####Step 5.発行してもらったAPI KEYは、Analytics Serviceのプッシュ設定における入力の際に必要な値です。   

![Project Sett](https://raw.githubusercontent.com/ToastAnalytics/ToastAnalytics_JA/master/docs/Developer/images/image023.png)   
[図21 API Keyの確認（アンドロイド)]

####Step 6.「APP SETTING」 > 「プッシュ設定」でProject NumberとAPI Keyを登録します。

![Project Sett](https://raw.githubusercontent.com/ToastAnalytics/ToastAnalytics_JA/master/docs/Developer/images/image22.JPG)   
[図22 Project NumberおよびAPI Keyの登録（アンドロイド)]

#キャンペーンの作成

キャンペーンは、テンプレートの活用または利用者による全項目の入力により作成できます。
定期的に行われるキャンペーンの場合、テンプレートを使うと、早く簡単にキャンペーンを作成することができます。

## キャンペーンテンプレートの作成

実施頻度の高いまたは目標の設定されているキャンペーンに対してテンプレートを提供しています。「初期離脱防止」、「離脱防止」、「回帰誘導」、「初回購入への誘導」、「再購入への誘導」の5つのタイプがあります。 
システムから提供されるデフォルトのテンプレートは、利用者が削除することはできません。   

![Project Sett](https://raw.githubusercontent.com/ToastAnalytics/ToastAnalytics_JA/master/docs/Developer/images/image23.JPG)   
[図23 テンプレートリスト]

利用者が実施したキャンペーンをテンプレートとして保存したい場合は、「詳細設定」で保存してください。作成済みのテンプレートは、「テンプレートからキャンペーンを作成する」のリストに表示されます。利用者による削除も可能です。   

![Project Sett](https://raw.githubusercontent.com/ToastAnalytics/ToastAnalytics_JA/master/docs/Developer/images/image24.png)   
[図24 テンプレートを作成する]

## テンプレートからキャンペーンを作成する

テンプレートからキャンペーンを作成したい場合、「テンプレートからキャンペーンを作成する」のリストでキャンペーン作成ボタンを押します。   

![Project Sett](https://raw.githubusercontent.com/ToastAnalytics/ToastAnalytics_JA/master/docs/Developer/images/image25.png)   
[図25 テンプレートからキャンペーンを作成する]

キャンペーン作成時に表示される画面で、管理対象の選択、プラットフォーム、実施国、アプリ内における表示方法、プッシュ通知の使用有無、ミッションおよびリワード付与の有無といった設定項目を確認できます。その他のスケジュール、ミッション、リワード設定および詳細設定に関する情報は、該当するキャンペーンの内容に合わせて入力します。入力が完了したら、キャンペーンを登録してください。(※キャンペーンの実施 - キャンペーンの作成に関するガイドをご参照ください。)   

![Project Sett](https://raw.githubusercontent.com/ToastAnalytics/ToastAnalytics_JA/master/docs/Developer/images/image26.png)   
[図26 テンプレート作成時に設定できる項目]

##キャンペーンの実施

テンプレートを活用せず、利用者が希望する項目の内容を全て入力してキャンペーンを作成する方法もあります。   

![Project Setting](https://raw.githubusercontent.com/ToastAnalytics/ToastAnalytics_JA/master/docs/Developer/images/image27.png)   
[図27 「キャンペーンを作成する」ボタン]

基本設定、ミッションおよびリワードの設定、詳細設定の3段階に分けて内容を入力します。それから、登録ボタンを押すとキャンペーンの作成が完了します。   

![Project Setting](https://raw.githubusercontent.com/ToastAnalytics/ToastAnalytics_JA/master/docs/Developer/images/image030.jpg)   
[図28 キャンペーン作成のフェーズ]

###1.基本設定
キャンペーンの対象、スケジュール、プラットフォームなどの基本情報を入力します。   

![Project Setting](https://raw.githubusercontent.com/ToastAnalytics/ToastAnalytics_JA/master/docs/Developer/images/image29.png)   
[図29 キャンペーンの基本設定]

###2.ミッションおよびリワードの設定
キャンペーン実施時のミッションおよびリワードを「有り」に設定した場合、ミッションおよびリワードの付与基準となる達成値、リワードのタイプ、付与するリワードの値を入力します。   

![Project Setting](https://raw.githubusercontent.com/ToastAnalytics/ToastAnalytics_JA/master/docs/Developer/images/image30.png)   
[図30 キャンペーンにおけるミッションおよびリワードの設定]

###3.詳細設定
基本設定で選んだ「アプリ内表示方法」および「プッシュ使用の有無」、「ミッションおよびリワード」の詳細を設定します。「アプリ内表示方法」をポップアップにした場合、「ポップアップ設定」を行います。

![Project Setting](https://raw.githubusercontent.com/ToastAnalytics/ToastAnalytics_JA/master/docs/Developer/images/image31.png)   
[図31 キャンペーンの詳細設定 > ポップアップ設定]

「アプリ内表示方法」をバナーにした場合、「バナー」設定を行います。   

![Project Setting](https://raw.githubusercontent.com/ToastAnalytics/ToastAnalytics_JA/master/docs/Developer/images/image32.png)   
[図32 キャンペーンの詳細設定 > バナー設定]

プッシュを使う場合、「プッシュ設定」で詳細を設定します。   

![Project Sett](https://raw.githubusercontent.com/ToastAnalytics/ToastAnalytics_JA/master/docs/Developer/images/image33.png)   
[図33 キャンペーンの詳細設定 > プッシュ設定]


プッシュ通知の送信は、キャンペーン実施時に限って1回のみ送られる「1回送信」 および毎日または毎週の特定の時間に定期的に送信される「リピート送信」の2タイプから選べます。（「1回送信」の場合、送信が完了するまで最大1時間までかかることもあります)

#キャンペーンのテスト

キャンペーンの実施の前に、設定した内容が正常に表示されるかを確認するためにテストを実施できます。テストが正常に完了すると、キャンペーンの配賦ができます。

##キャンペーンのステータス

テンプレートもしくは利用者自身の入力により作成されたキャンペーンは「キャンペーンリスト」に表示されます。   

![Project Sett](https://raw.githubusercontent.com/ToastAnalytics/ToastAnalytics_JA/master/docs/Developer/images/image34.png)   
[図34 キャンペーンリストに表示された新規キャンペーン]

「ステータス」列は、1)臨時保存、2)登録完了（テスト)、3)テストの完了（実施)、４)実施前（停止)、 5)実施中（停止)、 ６)終了の6段階で構成されており、場合によってステータスが変わります。
1) 臨時保存：キャンペーンの一部項目のみ入力が完了した状態で、「臨時保存」ボタンを押すと、ステータスが「臨時保存」に変わります。その場合、キャンペーンの設定項目の修正およびキャンペーンの削除ができます。
2) 登録完了（テスト)： キャンペーンの全ての項目を入力し、「作成」ボタンを押すと、キャンペーンの作成が終了し、ステータスは「保存完了」に変わります。すなわち、テスト実施の準備も完了したという意味です。ここで「テスト」ボタンを押すと、キャンペーンのテストを実施できます。キャンペーンテストの実施方法は、「2.テストを実施する」項目をご参照ください。
3) テストの完了（実施)：キャンペーンのテストが完了した場合のステータスです。
4) 実施前（停止)：キャンペーン開始日の前に「実施」ボタンを押すと、ステータスが「実施前」に変わります。キャンペーン開始日になると、自動的に「実施中（中止)」に変わります。「実施前」の状態で「停止」ボタンを押すと、「テスト完了（実施)」の状態に戻ります。
5) 実施中（停止)：キャンペーン開始日以降、「実施」ボタンを押すと、キャンペーンが開始され、ユーザーにキャンペーンが表示されます。ここで、「停止」ボタンを押すと、キャンペーンの作成時に設定した終了日でなくても、キャンペーンは終了します。

##テストを実施する
登録済みのキャンペーンが正常に表示されるかテストするために、「キャンペーンの実施」 > 「キャンペーンリスト」のステータスにある「登録完了（テスト)」でテストボタンを押します。 
*テストは、ポップアップ/バナーまたはプッシュクリックによりキャンペーンが開始する「キャンペーン実施テスト」およびデバイスからプッシュ受信の可否を確認する「プッシュ送信テスト」に分けられます。  

###1) プッシュのない場合：キャンペーン実施のテストを行う
プッシュのない場合、テストボタンをクリックすると、下記のようなポップアップが表示されます。
ポップアップの「テストを実施する」ボタンを押すと、テストが開始されます。   

![Project Sett](https://raw.githubusercontent.com/ToastAnalytics/ToastAnalytics_JA/master/docs/Developer/images/image35.png)   
[図35 キャンペーンテストのポップアップ（プッシュのない場合)]

「環境設定」 > 「キャンペーン設定」 > 「テストデバイス設定」で登録した端末にインストールされているアプリを立ち上げ、キャンペーンが正常に表示されるか確認します。または、プッシュ通知をタッチしてアプリを立ち上げます。

####キャンペーンが表示されない場合
- 「テストデバイス設定」でデバイス情報が正常か確認します。
- 「表示場所」がアプリに入力済み状態か確認します。

####キャンペーンが正常に終了した場合 
ポップアップ/バナーの表示テストの終了後、「結果を見る」をクリックすると、表示と実施のステータスが「完了」に変わります。プッシュにより実施された場合、ステータスが「完了」に変わります。
ミッションおよびリワードのあるキャンペーンの場合、登録済みのミッションを達成してからリワードを確認します。テスト終了後、「結果を見る」ページでミッションとリワードが「完了」に変わったことを確認できます。

####ミッション：失敗と表示された場合
- ユーザーのミッション達成可否および達成情報がキャンペーンREST APIを正常に呼び出したか確認します。
- キャンペーンREST APIを呼び出す際、サーバー間の通信における問題の有無を確認します。

####リワード：失敗と表示された場合
- ミッションが完了したら、アプリからリワード情報がきちんと受信できたか確認します。
- このプロセスは、ミッションが完了してから、最大5分程度かかることもあります。また、アプリ終了後の再ログイン時にすぐ確認できます。 
- リワードの付与後、付与に関する情報がキャンペーンREST APIを正常に呼び出したか確認します。
- リワードを付与する前に、キャンペーンREST APIにより有効性の有無を確認してから、リワードを付与してください。


###2) プッシュのある場合、キャンペーン実施のテストを行う   

![Project Sett](https://raw.githubusercontent.com/ToastAnalytics/ToastAnalytics_JA/master/docs/Developer/images/image36.png)   
[図36 キャンペーンテスト時のポップアップ（プッシュがある場合)]

「プッシュ送信テスト」は、 プッシュ通知の送信可否と関係なく、「環境設定」 > 「キャンペーン設定」 > 「テストデバイス設定」に登録されている端末にプッシュが送られます。

####テスト端末にプッシュが届かない場合 
- 「環境設定」 > 「プッシュ設定」で証明書の情報が正常か確認します。
- 「環境設定」 > 「キャンペーン設定」 > 「テストデバイス設定」でデバイストークンが正常か確認します。
- それ以降も届かない場合は、「お問い合わせ」に連絡してください。

![Project Sett](https://raw.githubusercontent.com/ToastAnalytics/ToastAnalytics_JA/master/docs/Developer/images/image039.jpg)   
[図37 プッシュリクエストの通知アラート]
